import{c as ct,a as u,t as g}from"../chunks/disclose-version.DTAQul2H.js";import{f as j,p as Y,c as r,r as e,s as i,t as W,a as Z,d as A,F as xt,b as n,g as d,n as dt}from"../chunks/runtime.B4QXH2CN.js";import{i as kt}from"../chunks/lifecycle.DAFDPKuL.js";import{o as bt}from"../chunks/index-client.Bib29rnf.js";import{I as wt,s as Rt,a as N}from"../chunks/Icon.yFnM2WBm.js";import{d as vt,e as Ct,a as U}from"../chunks/store.D_on7m4h.js";import{i as T}from"../chunks/if.DRLG6bOh.js";import{r as G,e as K,i as O}from"../chunks/attributes.DPN48yOH.js";import{t as Et,f as St}from"../chunks/index.A-vRoXhT.js";import{l as Mt,s as Nt,a as D}from"../chunks/preload-helper.B2IhT0O3.js";import{b as Ft}from"../chunks/select.CXmm0mL2.js";import{b as H}from"../chunks/input.Br29pWBN.js";import{P as Dt}from"../chunks/pencil.BlEN5tg-.js";import{T as Tt}from"../chunks/trash-2.DnhmlcTU.js";import{P as qt}from"../chunks/plus.BfN9yc11.js";import{X as At}from"../chunks/x.xw5d-c1A.js";function jt(E,t){const s=Mt(t,["children","$$slots","$$events","$$legacy"]);wt(E,Nt({name:"trending-up"},()=>s,{iconNode:[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17"}],["polyline",{points:"16 7 22 7 22 13"}]],children:(k,S)=>{var l=ct(),p=j(l);Rt(p,t,"default",{}),u(k,l)},$$slots:{default:!0}}))}var zt=g('<div class="space-y-2"><label class="block text-sm font-medium">Name</label> <input type="text" class="w-full px-3 py-2 bg-background border border-border rounded-lg" required></div> <div class="space-y-2"><label class="block text-sm font-medium">Symbol</label> <input type="text" class="w-full px-3 py-2 bg-background border border-border rounded-lg" required></div>',1),It=g('<div class="space-y-2"><label class="block text-sm font-medium">Name</label> <input type="text" class="w-full px-3 py-2 bg-background border border-border rounded-lg" required></div> <div class="space-y-2"><label class="block text-sm font-medium">Value</label> <input type="number" class="w-full px-3 py-2 bg-background border border-border rounded-lg" required></div>',1),Pt=g('<div class="space-y-2"><label class="block text-sm font-medium">Status</label> <input type="text" class="w-full px-3 py-2 bg-background border border-border rounded-lg" required></div>'),Lt=g('<form class="space-y-4"><h2 class="text-xl font-semibold mb-4"> </h2> <!> <div class="flex justify-end gap-2 pt-4"><button type="button" class="px-4 py-2 border border-border rounded-lg hover:bg-muted">Cancel</button> <button type="submit" class="px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90"> </button></div></form>');function Vt(E,t){Y(t,!0);let s=D(t.item?{...t.item}:{...t.type==="likelihoodRating"||t.type==="riskControlRating"?{name:"",symbol:""}:t.type==="severity"?{name:"",value:0}:{status:""}});const F=_=>{_.preventDefault(),t.onSave(s)};var k=Lt(),S=r(k),l=r(S);e(S);var p=i(S,2);T(p,()=>t.type==="likelihoodRating"||t.type==="riskControlRating",_=>{var f=zt(),m=j(f),b=i(r(m),2);G(b),e(m);var y=i(m,2),h=i(r(y),2);G(h),e(y),H(b,()=>s.name,R=>s.name=R),H(h,()=>s.symbol,R=>s.symbol=R),u(_,f)},_=>{var f=ct(),m=j(f);T(m,()=>t.type==="severity",b=>{var y=It(),h=j(y),R=i(r(h),2);G(R),e(h);var z=i(h,2),I=i(r(z),2);G(I),e(z),H(R,()=>s.name,X=>s.name=X),H(I,()=>s.value,X=>s.value=X),u(b,y)},b=>{var y=Pt(),h=i(r(y),2);G(h),e(y),H(h,()=>s.status,R=>s.status=R),u(b,y)},!0),u(_,f)});var c=i(p,2),v=r(c);v.__click=function(..._){var f;(f=t.onCancel)==null||f.apply(this,_)};var w=i(v,2),q=r(w,!0);e(w),e(c),e(k),W(()=>{U(l,`${(t.item?"Edit":"Add New")??""}
		${t.type??""}`),U(q,t.item?"Update":"Create")}),Ct("submit",k,F),u(E,k),Z()}vt(["click"]);var Bt=g('<td class="px-6 py-4"> </td> <td class="px-6 py-4"> </td>',1),Ut=g('<td class="px-6 py-4"> </td> <td class="px-6 py-4"> </td>',1),Xt=g('<td class="px-6 py-4"> </td>'),Gt=(E,t)=>t.onEdit(t.item),Ht=(E,t)=>t.onDelete(t.item.id),Jt=g('<tr class="hover:bg-muted/50"><!><td class="px-6 py-4"><div class="flex gap-2"><button class="p-2 hover:bg-muted rounded-lg text-muted-foreground hover:text-foreground"><!></button> <button class="p-2 hover:bg-red-100 text-red-500 hover:text-red-600 rounded-lg disabled:opacity-50"><!></button></div></td></tr>');function Q(E,t){Y(t,!0);var s=Jt(),F=r(s);T(F,()=>t.type==="likelihoodRating"||t.type==="riskControlRating",w=>{var q=Bt(),_=j(q),f=r(_,!0);e(_);var m=i(_,2),b=r(m,!0);e(m),W(()=>{U(f,t.item.name),U(b,t.item.symbol)}),u(w,q)},w=>{var q=ct(),_=j(q);T(_,()=>t.type==="severity",f=>{var m=Ut(),b=j(m),y=r(b,!0);e(b);var h=i(b,2),R=r(h,!0);e(h),W(()=>{U(y,t.item.name),U(R,t.item.value)}),u(f,m)},f=>{var m=Xt(),b=r(m,!0);e(m),W(()=>U(b,t.item.status)),u(f,m)},!0),u(w,q)});var k=i(F),S=r(k),l=r(S);l.__click=[Gt,t];var p=r(l);Dt(p,{size:16}),e(l);var c=i(l,2);c.__click=[Ht,t];var v=r(c);Tt(v,{size:16}),e(c),e(S),e(k),e(s),u(E,s),Z()}vt(["click"]);var Kt=(E,t,s)=>{n(t,null),n(s,!0)},Ot=g('<div class="flex justify-center p-8"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div>'),Qt=g('<table class="w-full"><thead class="bg-muted/50"><tr><th class="px-6 py-4 text-left">Name</th><th class="px-6 py-4 text-left">Symbol</th><th class="px-6 py-4 text-left">Actions</th></tr></thead><tbody class="divide-y divide-border"></tbody></table>'),Wt=g('<table class="w-full"><thead class="bg-muted/50"><tr><th class="px-6 py-4 text-left">Name</th><th class="px-6 py-4 text-left">Value</th><th class="px-6 py-4 text-left">Actions</th></tr></thead><tbody class="divide-y divide-border"></tbody></table>'),Yt=g('<table class="w-full"><thead class="bg-muted/50"><tr><th class="px-6 py-4 text-left">Name</th><th class="px-6 py-4 text-left">Symbol</th><th class="px-6 py-4 text-left">Actions</th></tr></thead><tbody class="divide-y divide-border"></tbody></table>'),Zt=g('<table class="w-full"><thead class="bg-muted/50"><tr><th class="px-6 py-4 text-left">Status</th><th class="px-6 py-4 text-left">Actions</th></tr></thead><tbody class="divide-y divide-border"></tbody></table>'),$t=g('<div class="overflow-x-auto bg-card rounded-lg shadow border border-border"><!> <!> <!> <!></div>'),te=g('<div class="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"><div class="bg-card p-6 rounded-lg w-full max-w-md relative border border-border"><button class="absolute right-4 top-4 p-1 hover:bg-muted rounded-lg"><!></button> <!></div></div>'),ee=g('<div class="min-h-screen container"><div class="mb-6"><div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"><div class="flex items-center gap-2"><!> <h1 class="text-2xl font-bold">Ratings Management</h1></div></div> <div class="flex justify-between py-3 items-center"><div class="flex items-center"><label for="dataSelect" class="text-lg font-semibold mr-4">Select Data Type:</label> <div class="relative w-64"><select id="dataSelect" class="w-full px-4 py-2 bg-card focus:outline-none focus:ring-2 focus:ring-ring border border-border rounded-lg appearance-none"><option>Likelihood Rating</option><option>Severity</option><option>Risk Control Rating</option><option>Risk Monitoring Rating</option></select> <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none"><svg class="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></div></div></div> <button class="flex items-center gap-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90"><!> Add New</button></div></div> <!></div> <!>',1);function re(E,t){Y(t,!0);let s=A(D([])),F=A(D([])),k=A(D([])),S=A(D([])),l=A(!1),p=A(null),c=A("likelihoodRating"),v=A(!1),w=A(null);const q=async()=>{try{n(l,!0);const{data:o,error:a}=await N.from("likelihood_rating").select("*");if(a)throw a;n(s,D(o))}catch(o){console.error("Error fetching likelihood rating:",o),n(p,"Failed to fetch likelihood rating.")}finally{n(l,!1)}},_=async()=>{try{n(l,!0);const{data:o,error:a}=await N.from("severity").select("*");if(a)throw a;n(F,D(o))}catch(o){console.error("Error fetching severity:",o),n(p,"Failed to fetch severity.")}finally{n(l,!1)}},f=async()=>{try{n(l,!0);const{data:o,error:a}=await N.from("risk_control_rating").select("*");if(a)throw a;n(k,D(o))}catch(o){console.error("Error fetching risk control rating:",o),n(p,"Failed to fetch risk control rating.")}finally{n(l,!1)}},m=async()=>{try{n(l,!0);const{data:o,error:a}=await N.from("risk_monitoring_rating").select("*");if(a)throw a;n(S,D(o))}catch(o){console.error("Error fetching risk monitoring rating:",o),n(p,"Failed to fetch risk monitoring rating.")}finally{n(l,!1)}},b=async o=>{try{n(l,!0);const a=h();if(d(w)){const{error:C}=await N.from(a).update(o).eq("id",d(w).id);if(C)throw C}else{const{error:C}=await N.from(a).insert(o);if(C)throw C}await I(),R()}catch(a){console.error(a),n(p,`Failed to ${d(w)?"update":"create"} ${d(c)}`)}finally{n(l,!1)}},y=async o=>{if(confirm("Are you sure you want to delete this item?"))try{n(l,!0);const a=h(),{error:C}=await N.from(a).delete().eq("id",o);if(C)throw C;await I()}catch(a){console.error(a),n(p,"Failed to delete item")}finally{n(l,!1)}},h=()=>{switch(d(c)){case"likelihoodRating":return"likelihood_rating";case"severity":return"severity";case"riskControlRating":return"risk_control_rating";case"riskMonitoringRating":return"risk_monitoring_rating";default:throw new Error("Invalid table name")}},R=()=>{n(v,!1),n(w,null)},z=o=>{n(w,D(o)),n(v,!0)},I=async()=>{switch(d(c)){case"likelihoodRating":await q();break;case"severity":await _();break;case"riskControlRating":await f();break;case"riskMonitoringRating":await m();break}};bt(()=>{I()}),xt(()=>{I()});var X=ee(),$=j(X),tt=r($),et=r(tt),ut=r(et),yt=r(ut);jt(yt,{class:"w-8 h-8 text-primary"}),dt(2),e(ut),e(et);var mt=i(et,2),rt=r(mt),gt=i(r(rt),2),at=r(gt),ot=r(at);ot.value=(ot.__value="likelihoodRating")==null?"":"likelihoodRating";var it=i(ot);it.value=(it.__value="severity")==null?"":"severity";var nt=i(it);nt.value=(nt.__value="riskControlRating")==null?"":"riskControlRating";var ft=i(nt);ft.value=(ft.__value="riskMonitoringRating")==null?"":"riskMonitoringRating",e(at),dt(2),e(gt),e(rt);var lt=i(rt,2);lt.__click=[Kt,w,v];var pt=r(lt);qt(pt,{size:20}),dt(),e(lt),e(mt),e(tt);var _t=i(tt,2);T(_t,()=>d(l),o=>{var a=Ot();u(o,a)},o=>{var a=$t(),C=r(a);T(C,()=>d(c)==="likelihoodRating",L=>{var x=Qt(),M=i(r(x));K(M,21,()=>d(s),O,(V,B)=>{Q(V,{get item(){return d(B)},onEdit:z,onDelete:y,type:"likelihoodRating"})}),e(M),e(x),u(L,x)});var P=i(C,2);T(P,()=>d(c)==="severity",L=>{var x=Wt(),M=i(r(x));K(M,21,()=>d(F),O,(V,B)=>{Q(V,{get item(){return d(B)},onEdit:z,onDelete:y,type:"severity"})}),e(M),e(x),u(L,x)});var J=i(P,2);T(J,()=>d(c)==="riskControlRating",L=>{var x=Yt(),M=i(r(x));K(M,21,()=>d(k),O,(V,B)=>{Q(V,{get item(){return d(B)},onEdit:z,onDelete:y,type:"riskControlRating"})}),e(M),e(x),u(L,x)});var st=i(J,2);T(st,()=>d(c)==="riskMonitoringRating",L=>{var x=Zt(),M=i(r(x));K(M,21,()=>d(S),O,(V,B)=>{Q(V,{get item(){return d(B)},onEdit:z,onDelete:y,type:"riskMonitoringRating"})}),e(M),e(x),u(L,x)}),e(a),u(o,a)}),e($);var ht=i($,2);T(ht,()=>d(v),o=>{var a=te(),C=r(a),P=r(C);P.__click=R;var J=r(P);At(J,{size:20}),e(P);var st=i(P,2);Vt(st,{get type(){return d(c)},get item(){return d(w)},onSave:b,onCancel:R}),e(C),e(a),Et(3,a,()=>St,()=>({duration:200})),u(o,a)}),Ft(at,()=>d(c),o=>n(c,o)),u(E,X),Z()}vt(["click"]);var ae=g('<main class="container mx-auto min-h-screen p-4"><!></main>');function he(E,t){Y(t,!1);const s=async()=>{const{data:c,error:v}=await N.from("likelihood_rating").select("*");v&&console.error("Error fetching likelihood rating:",v)},F=async()=>{const{data:c,error:v}=await N.from("severity").select("*");v&&console.error("Error fetching severity:",v)},k=async()=>{const{data:c,error:v}=await N.from("risk_control_rating").select("*");v&&console.error("Error fetching risk control rating:",v)},S=async()=>{const{data:c,error:v}=await N.from("risk_monitoring_rating").select("*");v&&console.error("Error fetching risk monitoring rating:",v)};bt(()=>{s(),F(),k(),S()}),kt();var l=ae(),p=r(l);re(p,{}),e(l),u(E,l),Z()}export{he as component};
