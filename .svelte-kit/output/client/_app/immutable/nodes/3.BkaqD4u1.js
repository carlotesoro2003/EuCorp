import{a as f,t as h}from"../chunks/disclose-version.DTAQul2H.js";import{p as ie,t as $,a as ne,b as o,g as e,d as m,s as n,f as Q,c as a,r as i}from"../chunks/runtime.B4QXH2CN.js";import{d as le,e as de,a as k}from"../chunks/store.D_on7m4h.js";import{i as b}from"../chunks/if.DRLG6bOh.js";import{r as E,s as V}from"../chunks/attributes.DPN48yOH.js";import{t as ce,s as ue}from"../chunks/index.A-vRoXhT.js";import{b as L}from"../chunks/input.Br29pWBN.js";import{o as ge}from"../chunks/index-client.Bib29rnf.js";/* empty css                         */import{a as x}from"../chunks/Icon.yFnM2WBm.js";import{E as ve}from"../chunks/eye.BPTSt0Sg.js";import{E as pe}from"../chunks/eye-off.BLnrzLPS.js";async function fe(w,c){try{const{error:g}=await x.auth.signInWithOAuth({provider:"azure",options:{scopes:"email openid profile",redirectTo:window.location.origin+"/dashboard"}});if(g){o(c,`Failed to initiate Azure login: ${g.message}`),console.error("Azure login initiation error:",g);return}o(c,"Redirecting to Azure login...")}catch(g){console.error("Error during Azure sign-in:",g),o(c,"Unexpected error occurred. Please try again.")}}var me=h('<div class="flex gap-4"><input type="text" placeholder="First Name" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 dark:bg-gray-800 dark:text-white dark:border-gray-700"> <input type="text" placeholder="Last Name" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 dark:bg-gray-800 dark:text-white dark:border-gray-700"></div>'),he=(w,c)=>o(c,!e(c)),be=h('<div class="relative"><input placeholder="Confirm Password" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 dark:bg-gray-800 dark:text-white dark:border-gray-700"></div>'),xe=h('<span class="inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"></span>'),we=h('<div class="mt-4 p-3 rounded-lg bg-red-100 dark:bg-red-900/20"><p class="text-sm text-center text-red-700 dark:text-red-400"> </p></div>'),_e=h('<div class="w-5 h-5 border-t-2 border-white rounded-full animate-spin"></div>'),ye=h('<svg class="w-5 h-5" viewBox="0 0 256 256" fill="none"><path d="M126.23 14.7L0 207.43h71.54L126.23 80.7l54.7 126.74h71.54L126.23 14.7Z" fill="#fff"></path><path d="M88.73 213.22H176l-44.76-79.55-42.51 79.55Z" fill="#fff"></path><path d="M176 213.22H252L200.28 127l-24.28 86.22Z" fill="#fff"></path></svg>'),ke=(w,c)=>o(c,!1),Ee=h(`Don't have an account? <button class="text-blue-600 hover:underline dark:text-blue-400 font-medium">Register</button>`,1),Le=(w,c)=>o(c,!0),Pe=h('Already have an account? <button class="text-blue-600 hover:underline dark:text-blue-400 font-medium">Login</button>',1),je=h(`<div class="min-h-screen grid lg:grid-cols-2 transition-colors duration-300 dark:bg-gray-900"><div class="relative hidden lg:block bg-cover bg-center" style="background-image: linear-gradient(180deg, rgba(103, 21, 21, 0.8) 0%, rgba(103, 21, 21, 0.3) 50%), url('/images/login_bg.png');"><div class="absolute top-8 left-8 z-20"><h1 class="text-4xl font-black text-white tracking-tight">Eucorp</h1> <p class="text-sm text-gray-200 mt-1">Institutional Planning System</p></div> <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-10"><div class="max-w-md mx-auto space-y-8"><h2 class="text-2xl font-bold text-white">Transform Your Project Management</h2> <div class="space-y-4"><div class="flex items-center space-x-4 text-white/90 hover:text-white transition-colors group"><div class="p-2 bg-rose-600/20 rounded-lg group-hover:bg-rose-600/30 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-rose-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div> <div><h3 class="font-semibold">Streamline Project Management</h3> <p class="text-sm text-white/70">Efficiently manage projects and resources in one place</p></div></div> <div class="flex items-center space-x-4 text-white/90 hover:text-white transition-colors group"><div class="p-2 bg-blue-600/20 rounded-lg group-hover:bg-blue-600/30 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div> <div><h3 class="font-semibold">Enhanced Collaboration</h3> <p class="text-sm text-white/70">Work together seamlessly with your team members</p></div></div> <div class="flex items-center space-x-4 text-white/90 hover:text-white transition-colors group"><div class="p-2 bg-green-600/20 rounded-lg group-hover:bg-green-600/30 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div> <div><h3 class="font-semibold">Progress Monitoring</h3> <p class="text-sm text-white/70">Track and analyze project progress in real-time</p></div></div></div></div></div></div> <div class="flex items-center justify-center px-8"><div class="w-full max-w-md"><div class="text-center mb-8"><h1 class="text-2xl font-semibold dark:text-white"> </h1> <p class="text-gray-600 dark:text-gray-400"> </p></div> <form class="space-y-4"><!> <input type="email" placeholder="name@example.com" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 dark:bg-gray-800 dark:text-white dark:border-gray-700"> <div class="relative"><input placeholder="Password" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 dark:bg-gray-800 dark:text-white dark:border-gray-700"> <button type="button" class="absolute inset-y-0 right-4 flex items-center dark:text-gray-400"><!></button></div> <!> <button type="submit" class="w-full px-4 py-2 text-white bg-rose-700 rounded-lg hover:bg-rose-800 focus:ring-4 focus:ring-rose-300 dark:bg-rose-800 dark:hover:bg-rose-900"><!> </button></form> <!> <div class="relative my-6"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300 dark:border-gray-700"></div></div> <div class="relative flex justify-center text-sm"><span class="px-2 text-gray-500 bg-white dark:bg-gray-900 dark:text-gray-400">OR</span></div></div> <button type="button" class="w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2 disabled:opacity-50"><!> <span> </span></button> <p class="text-sm text-center mt-4 dark:text-gray-400"><!></p></div></div></div>`);function Te(w,c){ie(c,!0);let g=m(""),_=m(""),q=m(""),P=m(""),j=m(""),u=m(""),d=m(!1),p=m(!0),A=m(!1);ge(async()=>{const{data:{session:t},error:r}=await x.auth.getSession();if(t){const{data:s,error:l}=await x.from("profiles").select("is_verified").eq("id",t.user.id).single();!l&&(s!=null&&s.is_verified)&&(window.location.href="/dashboard")}});async function X(t){if(t.preventDefault(),o(d,!0),o(u,""),e(p)){const{data:r,error:s}=await x.auth.signInWithPassword({email:e(g),password:e(_)});if(s){o(u,`Failed to login: ${s.message}`),console.error("Login error:",s),o(d,!1);return}const l=r==null?void 0:r.user;if(l){const{data:v,error:K}=await x.from("profiles").select("is_verified").eq("id",l.id).single();if(K){console.error("Error fetching profile:",K),o(u,"Error checking verification status."),o(d,!1);return}if(!(v!=null&&v.is_verified)){o(u,"Your account is pending verification."),o(d,!1);return}o(u,"Login successful! Redirecting..."),window.location.href="/dashboard"}}else{if(e(_)!==e(q)){o(u,"Passwords do not match."),o(d,!1);return}const{data:r,error:s}=await x.auth.signUp({email:e(g),password:e(_),options:{data:{first_name:e(P),last_name:e(j)}}});if(s){o(u,`Failed to register: ${s.message}`),console.error("Registration error:",s),o(d,!1);return}const l=r==null?void 0:r.user;if(l){const{error:v}=await x.from("profiles").insert({id:l.id,email:l.email,first_name:e(P),last_name:e(j),role:"user",is_verified:!1});if(v){console.error("Error inserting profile:",v),o(u,"Profile creation failed. Please try again later."),o(d,!1);return}}o(u,"Registration successful! Please check your email for verification.")}o(d,!1)}var R=je(),T=n(a(R),2),W=a(T),C=a(W),S=a(C),ee=a(S,!0);i(S);var Z=n(S,2),re=a(Z,!0);i(Z),i(C);var M=n(C,2),D=a(M);b(D,()=>!e(p),t=>{var r=me(),s=a(r);E(s);var l=n(s,2);E(l),i(r),L(s,()=>e(P),v=>o(P,v)),L(l,()=>e(j),v=>o(j,v)),f(t,r)});var B=n(D,2);E(B);var F=n(B,2),z=a(F);E(z);var I=n(z,2);I.__click=[he,A];var te=a(I);b(te,()=>e(A),t=>{pe(t,{class:"w-5 h-5"})},t=>{ve(t,{class:"w-5 h-5"})}),i(I),i(F);var H=n(F,2);b(H,()=>!e(p),t=>{var r=be(),s=a(r);E(s),i(r),$(()=>V(s,"type",e(A)?"text":"password")),L(s,()=>e(q),l=>o(q,l)),f(t,r)});var N=n(H,2),O=a(N);b(O,()=>e(d),t=>{var r=xe();f(t,r)});var oe=n(O);i(N),i(M);var U=n(M,2);b(U,()=>e(u),t=>{var r=we(),s=a(r),l=a(s,!0);i(s),i(r),$(()=>k(l,e(u))),ce(3,r,()=>ue),f(t,r)});var y=n(U,4);y.__click=[fe,u];var Y=a(y);b(Y,()=>e(d),t=>{var r=_e();f(t,r)},t=>{var r=ye();f(t,r)});var G=n(Y,2),se=a(G,!0);i(G),i(y);var J=n(y,2),ae=a(J);b(ae,()=>e(p),t=>{var r=Ee(),s=n(Q(r));s.__click=[ke,p],f(t,r)},t=>{var r=Pe(),s=n(Q(r));s.__click=[Le,p],f(t,r)}),i(J),i(W),i(T),i(R),$(()=>{k(ee,e(p)?"Login":"Create an Account"),k(re,e(p)?"Sign in to continue":"Enter your details to register"),V(z,"type",e(A)?"text":"password"),N.disabled=e(d),k(oe,` ${(e(d)?"Processing...":e(p)?"Login":"Register")??""}`),y.disabled=e(d),k(se,e(d)?"Processing...":"Sign in with Azure")}),de("submit",M,X),L(B,()=>e(g),t=>o(g,t)),L(z,()=>e(_),t=>o(_,t)),f(w,R),ne()}le(["click"]);export{Te as component};
