import{c as ue,a as b,t as x}from"../chunks/disclose-version.DTAQul2H.js";import{f as Z,p as q,d as _,c as t,r as a,s as l,t as E,b as d,g as e,a as C,F as Ee,n as ve,e as U}from"../chunks/runtime.B4QXH2CN.js";import{i as je}from"../chunks/lifecycle.DAFDPKuL.js";import{o as Pe}from"../chunks/index-client.Bib29rnf.js";import{I as Fe,s as Me,a as A}from"../chunks/Icon.yFnM2WBm.js";import{e as Ne,a as P,d as me}from"../chunks/store.D_on7m4h.js";import{i as N}from"../chunks/if.DRLG6bOh.js";import{r as fe,e as Ae}from"../chunks/attributes.DPN48yOH.js";import{t as De,f as Ue}from"../chunks/index.A-vRoXhT.js";import{b as pe}from"../chunks/input.Br29pWBN.js";import{b as qe}from"../chunks/select.CXmm0mL2.js";import{l as Ce,s as Te,a as j}from"../chunks/preload-helper.B2IhT0O3.js";import{U as Ie}from"../chunks/user.DZaGwQNU.js";import{P as Qe}from"../chunks/pencil.BlEN5tg-.js";import{T as Xe}from"../chunks/trash-2.DnhmlcTU.js";import{S as Be}from"../chunks/search.K0UJueoa.js";import{A as Ge}from"../chunks/arrow-up-down.0onLll3z.js";import{P as He}from"../chunks/plus.BfN9yc11.js";import{X as Je}from"../chunks/x.xw5d-c1A.js";function Ke(u,r){const c=Ce(r,["children","$$slots","$$events","$$legacy"]);Fe(u,Te({name:"users-round"},()=>c,{iconNode:[["path",{d:"M18 21a8 8 0 0 0-16 0"}],["circle",{cx:"10",cy:"8",r:"5"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"}]],children:(i,f)=>{var m=ue(),v=Z(m);Me(v,r,"default",{}),b(i,m)},$$slots:{default:!0}}))}var Oe=x('<form class="flex flex-col gap-4"><h3 class="text-xl font-semibold"> </h3> <div class="flex flex-col gap-2"><label for="name" class="font-medium">Name</label> <input id="name" type="text" required class="bg-secondary border-secondary rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-ring" placeholder="Enter name"></div> <button type="submit" class="bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90 mt-4 disabled:opacity-50"> </button></form>');function Re(u,r){var g;q(r,!0);let c=_(j(((g=r.lead)==null?void 0:g.name)??""));const n=w=>{w.preventDefault(),r.onSave({name:e(c)})};var i=Oe(),f=t(i),m=t(f);a(f);var v=l(f,2),h=l(t(v),2);fe(h),a(v);var y=l(v,2),p=t(y);a(y),a(i),E(()=>{P(m,`${(r.lead?"Edit":"Add")??""} Lead`),y.disabled=r.isSaving,P(p,`${(r.isSaving?"Saving...":r.lead?"Update":"Add")??""} Lead`)}),Ne("submit",i,n),pe(h,()=>e(c),w=>d(c,w)),b(u,i),C()}var Ve=(u,r)=>r.onEdit(r.lead),We=(u,r)=>r.onDelete(r.lead.id),Ye=x('<div class="bg-card border border-border rounded-lg p-4 hover:shadow-lg transition-shadow"><div class="flex items-start justify-between"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary"><!></div> <div><h3 class="text-lg font-medium break-words"> </h3></div></div> <div class="flex items-center gap-2"><button class="hover:bg-muted rounded-lg text-muted-foreground hover:text-foreground" title="Edit"><!></button> <button class="p-1.5 hover:bg-muted rounded-lg text-red-400" title="Delete"><!></button></div></div></div>');function Ze(u,r){q(r,!0);var c=Ye(),n=t(c),i=t(n),f=t(i),m=t(f);Ie(m,{size:20}),a(f);var v=l(f,2),h=t(v),y=t(h,!0);a(h),a(v),a(i);var p=l(i,2),g=t(p);g.__click=[Ve,r];var w=t(g);Qe(w,{size:16}),a(g);var L=l(g,2);L.__click=[We,r];var T=t(L);Xe(T,{size:16}),a(L),a(p),a(n),a(c),E(()=>P(y,r.lead.name)),b(u,c),C()}me(["click"]);const $e=(u,r)=>{d(r,j(e(r)==="asc"?"desc":"asc"))};var er=x('<div class="bg-green-500/20 text-green-400 p-4 rounded-lg"> </div>'),rr=x('<div class="bg-red-500/20 text-red-400 p-4 rounded-lg"> </div>'),ar=(u,r,c)=>{d(r,null),d(c,!0)},tr=x('<div class="flex justify-center p-8"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div>'),or=x('<div class="text-center p-8 bg-card rounded-lg border border-border">No leads found.</div>'),sr=(u,r)=>d(r,e(r)-1),dr=(u,r)=>d(r,e(r)+1),lr=x('<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div> <div class="flex flex-col sm:flex-row justify-between items-center gap-4 mt-4"><div class="text-sm text-muted-foreground text-center sm:text-left"> </div> <div class="flex flex-col sm:flex-row items-center gap-4"><select class="bg-secondary border-secondary rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-ring w-full sm:w-auto"><option>6 per page</option><option>12 per page</option><option>24 per page</option><option>48 per page</option></select> <div class="flex gap-2"><button class="px-3 py-1 rounded-lg border border-border hover:bg-muted disabled:opacity-50">Previous</button> <button class="px-3 py-1 rounded-lg border border-border hover:bg-muted disabled:opacity-50">Next</button></div></div></div>',1),ir=x('<div class="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"><div class="bg-card p-6 rounded-lg w-full max-w-md relative border border-border"><button class="absolute right-4 top-4 p-1 hover:bg-muted rounded-lg"><!></button> <!></div></div>'),nr=x('<div class="flex flex-col gap-4 container mx-auto "><div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"><div class="flex items-center gap-2"><!> <h1 class="text-2xl font-bold">Leads</h1></div></div> <!> <!> <div class="flex flex-col md:flex-row items-center justify-between gap-4"><div class="flex flex-col md:flex-row gap-4 w-full md:w-auto"><div class="relative flex-1 md:w-[300px]"><!> <input type="text" placeholder="Search leads..." class="pl-10 pr-4 py-2 bg-secondary border-secondary rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-ring"></div> <button class="flex items-center gap-2 px-4 py-2 rounded-lg border border-border hover:bg-muted whitespace-nowrap">Sort by Name <!></button></div> <button class="flex items-center gap-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90 justify-center flex-1 md:flex-initial whitespace-nowrap"><!> Add Lead</button></div> <!> <!></div>');function cr(u,r){q(r,!0);let c=_(""),n=_(1),i=_(6),f=_(j([])),m=_(!1),v=_(null),h=_("asc"),y=_(!1),p=_(null),g=_(null),w=_(!1);const L=U(()=>e(f).filter(s=>s.name.toLowerCase().includes(e(c).toLowerCase())).sort((s,o)=>e(h)==="asc"?s.name<o.name?-1:s.name>o.name?1:0:o.name<s.name?-1:o.name>s.name?1:0)),T=U(()=>e(L).slice((e(n)-1)*e(i),e(n)*e(i))),ge=U(()=>Math.ceil(e(L).length/e(i))),I=async()=>{d(y,!0);const{data:s,error:o}=await A.from("leads").select("*");o?(console.error("Error fetching leads:",o),d(p,"Failed to fetch leads.")):(d(f,j(s)),d(p,null)),d(y,!1)},_e=async s=>{const{error:o}=await A.from("leads").delete().eq("id",s);o?(console.error("Error deleting lead:",o),d(p,"Failed to delete lead.")):(d(g,"Lead deleted successfully!"),d(p,null),await I())},be=s=>{d(v,j(s)),d(m,!0)},$=()=>{d(m,!1),d(v,null)},xe=async s=>{d(w,!0);const{error:o}=e(v)?await A.from("leads").update({name:s.name}).eq("id",e(v).id):await A.from("leads").insert([{name:s.name}]);o?(console.error("Error saving lead:",o),d(p,"Failed to save lead.")):(d(g,j(e(v)?"Lead updated successfully!":"Lead added successfully!")),d(p,null),await I(),$()),d(w,!1)};Ee(()=>{I()});var Q=nr(),X=t(Q),ee=t(X),he=t(ee);Ke(he,{class:"w-8 h-8 text-primary"}),ve(2),a(ee),a(X);var re=l(X,2);N(re,()=>e(g),s=>{var o=er(),k=t(o,!0);a(o),E(()=>P(k,e(g))),b(s,o)});var ae=l(re,2);N(ae,()=>e(p),s=>{var o=rr(),k=t(o,!0);a(o),E(()=>P(k,e(p))),b(s,o)});var B=l(ae,2),G=t(B),H=t(G),te=t(H);Be(te,{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",size:20});var oe=l(te,2);fe(oe),a(H);var J=l(H,2);J.__click=[$e,h];var ye=l(t(J)),we=U(()=>e(h)==="asc"?"":"rotate-180");Ge(ye,{size:16,get class(){return e(we)}}),a(J),a(G);var K=l(G,2);K.__click=[ar,v,m];var Le=t(K);He(Le,{size:20}),ve(),a(K),a(B);var se=l(B,2);N(se,()=>e(y),s=>{var o=tr();b(s,o)},s=>{var o=ue(),k=Z(o);N(k,()=>e(f).length===0,S=>{var z=or();b(S,z)},S=>{var z=lr(),F=Z(z);Ae(F,21,()=>e(T),M=>M.id,(M,ze)=>{Ze(M,{get lead(){return e(ze)},onEdit:be,onDelete:_e})}),a(F);var de=l(F,2),O=t(de),Se=t(O);E(()=>P(Se,`Showing ${(e(n)-1)*e(i)+1} to ${Math.min(e(n)*e(i),e(L).length)??""} of ${e(L).length??""} results`)),a(O);var le=l(O,2),D=t(le),R=t(D);R.value=(R.__value=6)==null?"":6;var V=l(R);V.value=(V.__value=12)==null?"":12;var W=l(V);W.value=(W.__value=24)==null?"":24;var ie=l(W);ie.value=(ie.__value=48)==null?"":48,a(D);var ne=l(D,2),Y=t(ne);Y.__click=[sr,n];var ce=l(Y,2);ce.__click=[dr,n],a(ne),a(le),a(de),E(()=>{Y.disabled=e(n)===1,ce.disabled=e(n)===e(ge)}),qe(D,()=>e(i),M=>d(i,M)),b(S,z)},!0),b(s,o)});var ke=l(se,2);N(ke,()=>e(m),s=>{var o=ir(),k=t(o),S=t(k);S.__click=$;var z=t(S);Je(z,{size:20}),a(S);var F=l(S,2);Re(F,{get lead(){return e(v)},get isSaving(){return e(w)},onSave:xe}),a(k),a(o),De(3,o,()=>Ue,()=>({duration:200})),b(s,o)}),a(Q),pe(oe,()=>e(c),s=>d(c,s)),b(u,Q),C()}me(["click"]);var vr=x('<main class="container mx-auto min-h-screen p-4"><!></main>');function Mr(u,r){q(r,!1);const c=async()=>{const{data:f,error:m}=await A.from("leads").select("*");m&&console.error("Error fetching leads:",m)};Pe(()=>{c()}),je();var n=vr(),i=t(n);cr(i,{}),a(n),b(u,n),C()}export{Mr as component};
