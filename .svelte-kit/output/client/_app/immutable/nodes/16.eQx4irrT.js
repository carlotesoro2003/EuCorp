import{c as Z,a as _,t as w}from"../chunks/disclose-version.DTAQul2H.js";import{f as ee,p as te,R as ae,T as se,t as y,a as re,s as n,g as e,b as i,m,c as a,r as s,n as H,U as ie}from"../chunks/runtime.B4QXH2CN.js";import{d as le,a as E}from"../chunks/store.D_on7m4h.js";import{i as A}from"../chunks/if.DRLG6bOh.js";import{e as oe,i as ne,s as ce}from"../chunks/attributes.DPN48yOH.js";import{t as S}from"../chunks/class.BN6JjLqI.js";import{b as de}from"../chunks/select.CXmm0mL2.js";import{i as ve}from"../chunks/lifecycle.DAFDPKuL.js";import{o as ge}from"../chunks/index-client.Bib29rnf.js";import{I as ue,s as pe,a as B}from"../chunks/Icon.yFnM2WBm.js";import{T as fe}from"../chunks/target.BDjRuX_8.js";import{P as me}from"../chunks/plus.BfN9yc11.js";import{l as _e,s as be}from"../chunks/preload-helper.B2IhT0O3.js";import{C as xe}from"../chunks/circle-alert.DJ3oU1LY.js";function he(k,f){const u=_e(f,["children","$$slots","$$events","$$legacy"]);ue(k,be({name:"circle-check"},()=>u,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m9 12 2 2 4-4"}]],children:(x,p)=>{var l=Z(),v=ee(l);pe(v,f,"default",{}),_(x,l)},$$slots:{default:!0}}))}const ye=(k,f,u,b)=>{e(f)?i(u,1):i(b,"Please select a strategic goal first.")};var we=w('<div class="flex items-center gap-2 p-4 bg-green-100 text-green-700 rounded-lg mb-4"><!> <span> </span></div>'),ke=w('<div class="flex items-center gap-2 p-4 bg-red-100 text-red-700 rounded-lg mb-4"><!> <span> </span></div>'),je=w("<option> </option>"),$e=w('<div class="space-y-4"><label for="strategic_goal" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Select Strategic Goal</label> <select id="strategic_goal" class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"><option>Select a goal</option><!></select> <button class="w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"><!> Continue to Add Objectives</button></div>'),Se=w('<div class="min-h-screen bg-gray-50 dark:bg-gray-900 p-4 md:p-8"><div class="max-w-4xl mx-auto space-y-6"><div class="flex items-center justify-between bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm"><div><h1 class="text-2xl font-bold text-gray-900 dark:text-white">Create Strategic Objectives</h1> <p class="text-gray-600 dark:text-gray-400 mt-1">Define and manage your strategic objectives</p></div> <!></div> <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm"><div class="flex items-center justify-between mb-8"><div class="flex-1"><div class="relative"><div class="h-2 bg-gray-200 rounded"><div class="h-2 bg-blue-500 rounded transition-all duration-300"></div></div> <div class="flex justify-between absolute -top-3 w-full"><span class="w-8 h-8 flex items-center justify-center bg-blue-500 rounded-full text-white text-sm">1</span> <span class="w-8 h-8 flex items-center justify-center rounded-full text-sm">2</span></div></div> <div class="flex justify-between mt-4"><span class="text-sm font-medium text-gray-600">Select Goal</span> <span class="text-sm font-medium text-gray-600">Add Objectives</span></div></div></div> <!> <!> <!></div></div></div>');function qe(k,f){te(f,!1);let u=null,b=m(null),x=m([]),p=m(null),l=m(0),v=m(null),d=m(null);const J=async()=>{try{const{data:r,error:t}=await B.auth.getSession();if(t)throw t;if(u=r.session,u){const{user:o}=u,{data:c,error:g}=await B.from("profiles").select("id").eq("id",o.id).single();if(g)throw g;i(b,c)}}catch(r){i(d,`Error fetching profile: ${r.message}`)}finally{}},K=async()=>{try{const{data:r,error:t}=await B.from("strategic_goals").select("id, name");if(t)throw t;i(x,r||[])}catch{i(d,"Failed to fetch strategic goals.")}},L=()=>{i(l,0)};ge(()=>{J(),K()}),ae(()=>(e(v),e(d)),()=>{if(e(v)||e(d)){const r=setTimeout(()=>{i(v,null),i(d,null)},5e3);clearTimeout(r)}}),se(),ve();var G=Se(),D=a(G),C=a(D),Q=n(a(C),2);fe(Q,{class:"w-8 h-8 text-blue-500"}),s(C);var F=n(C,2),M=a(F),I=a(M),N=a(I),P=a(N),V=a(P);s(P);var U=n(P,2),j=n(a(U),2);s(U),s(N),H(2),s(I),s(M);var q=n(M,2);A(q,()=>e(v),r=>{var t=we(),o=a(t);he(o,{class:"w-5 h-5"});var c=n(o,2),g=a(c,!0);s(c),s(t),y(()=>E(g,e(v))),_(r,t)});var z=n(q,2);A(z,()=>e(d),r=>{var t=ke(),o=a(t);xe(o,{class:"w-5 h-5"});var c=n(o,2),g=a(c,!0);s(c),s(t),y(()=>E(g,e(d))),_(r,t)});var W=n(z,2);A(W,()=>e(l)===0,r=>{var t=$e(),o=n(a(t),2);y(()=>{e(p),ie(()=>{e(x)})});var c=a(o);c.value=(c.__value=null)==null?"":null;var g=n(c);oe(g,1,()=>e(x),ne,(O,$)=>{var h=je(),R={},Y=a(h,!0);s(h),y(()=>{R!==(R=e($).id)&&(h.value=(h.__value=e($).id)==null?"":e($).id),E(Y,e($).name)}),_(O,h)}),s(o);var T=n(o,2);T.__click=[ye,p,l,d];var X=a(T);me(X,{class:"w-5 h-5"}),H(),s(T),s(t),de(o,()=>e(p),O=>i(p,O)),_(r,t)},r=>{ObjectiveForm(r,{get selectedGoal(){return e(p)},get profile(){return e(b)},onBack:L,onSuccess:t=>{i(v,t),i(l,0),i(p,null)},onError:t=>i(d,t)})}),s(F),s(D),s(G),y(()=>{ce(V,"style",`width: ${(e(l)===1?"100%":"0%")??""}`),S(j,"bg-blue-500",e(l)===1),S(j,"text-white",e(l)===1),S(j,"bg-gray-200",e(l)===0),S(j,"text-gray-600",e(l)===0)}),_(k,G),re()}le(["click"]);export{qe as component};
