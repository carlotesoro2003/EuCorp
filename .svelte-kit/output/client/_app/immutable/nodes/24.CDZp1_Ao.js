import{a as x,t as S,c as Ft}from"../chunks/disclose-version.DTAQul2H.js";import{p as Tt,d as O,g as e,t as Y,b as E,a as Ct,c as a,s,n as kt,r as t,e as Ot,f as Lt,m as ae}from"../chunks/runtime.B4QXH2CN.js";import{d as At,a as p}from"../chunks/store.D_on7m4h.js";import{i as dt}from"../chunks/if.DRLG6bOh.js";import{e as nt,r as zt,i as lt}from"../chunks/attributes.DPN48yOH.js";import{c as se}from"../chunks/svelte-component.7O_5y5kT.js";import{s as Mt}from"../chunks/class.BN6JjLqI.js";import{a as ht}from"../chunks/Icon.yFnM2WBm.js";import{t as bt,b as yt}from"../chunks/index.A-vRoXhT.js";import{b as Yt}from"../chunks/input.Br29pWBN.js";import{a as ot}from"../chunks/preload-helper.B2IhT0O3.js";import{E as jt,a as St}from"../chunks/jspdf.plugin.autotable.BvDXkAOZ.js";import{D as It}from"../chunks/download.CXU6lRmm.js";import{S as Ut}from"../chunks/search.K0UJueoa.js";import{b as wt}from"../chunks/select.CXmm0mL2.js";import{C as Ht}from"../chunks/clipboard-list.rL2HrniE.js";import{T as re}from"../chunks/triangle-alert.BSZOOXW1.js";import{L as ie}from"../chunks/lightbulb.BQf6SH5D.js";var oe=S('<div class="flex justify-center items-center p-12"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div>'),ne=S('<div class="mt-4 pt-4 border-t"><h5 class="text-md font-medium  mb-3">Monitoring Details</h5> <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-4"><div><span class="text-sm font-medium ">Actions Taken to Achieve Action Plan</span> <p class="mt-1"> </p></div> <div><span class="text-sm font-medium">Statement</span> <p class="mt-1"> </p></div> <div><span class="text-sm font-medium">Remarks</span> <p class="mt-1"><span> </span></p></div> <div><span class="text-sm font-medium">Completed</span> <p class="mt-1"> </p></div></div></div>'),le=S('<div class="bg-card rounded-lg p-4 border border-border"><h4 class="font-medium  mb-2 text-yellow-600"> </h4> <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-4"><div><span class="text-sm font-medium">KPI</span> <p class="mt-1 text-sm "> </p></div> <div><span class="text-sm font-medium">Target Output</span> <p class="mt-1 "> </p></div> <div><span class="text-sm font-medium">Budget</span> <p class="mt-1"> </p></div> <div><span class="text-sm font-medium">Responsible</span> <p class="mt-1"> </p></div></div> <!></div>'),de=S('<div class="border-l-4 border-primary-600 pl-4"><h3 class="font-medium  mb-3 text-red-400"> </h3> <div class="grid gap-4 md:grid-cols-2 mb-4"><div class="p-3  rounded"><span class="text-sm font-medium ">KPI:</span> <p class="mt-1"> </p></div> <div class="p-3  rounded"><span class="text-sm font-medium ">Target:</span> <p class="mt-1"> </p></div></div> <div class="space-y-4"></div></div>'),me=S('<div class="bg-card rounded-lg p-4 border border-border  shadow-sm"><h2 class="text-xl text-primary font-semibold  mb-4"> </h2> <p class=" mb-6"> </p> <div class="space-y-6"></div></div>'),ve=S('<div class="space-y-8"></div>'),ce=S('<div class="w-full min-h-screen "><div class="max-w-7xl mx-auto p-6"><div class="flex justify-between items-center mb-8"><h1 class="text-2xl font-bold">Strategic Planning Summary Report</h1> <button class="flex items-center gap-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90 justify-center flex-1 md:flex-initial"><!> Export PDF</button></div> <div class="flex flex-col md:flex-row gap-4 mb-6 items-center justify-between"><div class="relative flex-1 md:max-w-[300px]"><!> <input type="text" placeholder="Search plans..." class="pl-10 pr-4 py-2 bg-secondary rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-ring"></div></div> <!></div></div>');function pe(J,L){Tt(L,!0);let w=O(ot([])),n=O(!0),g=O(""),m="id";const k=Ot(()=>e(w).filter(l=>{const v=`
				${l.id}
                    ${l.name} 
                    ${l.goal_no}
                    ${l.description}
                    ${l.strategic_objectives.map(f=>`${f.name} 
                         ${f.kpi} 
                         ${f.action_plans.map($=>`${$.actions_taken} 
                              ${$.kpi} 
                              ${$.target_output}
                              ${$.key_person_responsible}`).join(" ")}`).join(" ")}
                `.toLowerCase();return e(g)===""||v.includes(e(g).toLowerCase())}).sort((l,v)=>{const P=String(l[m]),f=String(v[m]);return P.localeCompare(f)})),A=async()=>{try{E(n,!0);const{data:l,error:v}=await ht.from("strategic_goals").select(`
            id,
            goal_no,
            name,
            description,
            kpi,
            strategic_objectives (
            id,
            name,
            strategic_initiatives,
            kpi,
            persons_involved,
            target,
            eval_measures,
            action_plans (
                id,
                actions_taken,
                kpi,
                target_output,
                budget,
                key_person_responsible
            )
            )
        `);if(v){console.error("Error fetching plans data:",v.message);return}const{data:P,error:f}=await ht.from("plan_monitoring").select(`
            action_plan_id,
            evaluation,
            statement,
            is_accomplished,
            time_completed
        `);if(f){console.error("Error fetching plan monitoring data:",f.message);return}E(w,ot(l.map($=>({...$,strategic_objectives:$.strategic_objectives.map(N=>({...N,action_plans:N.action_plans.map(I=>({...I,plan_monitoring:P.find(b=>b.action_plan_id===I.id)||null}))}))}))))}catch(l){console.error("Unexpected error fetching plans data:",l)}finally{E(n,!1)}},H=()=>{const l=new jt("landscape");l.setFont("times","normal"),l.setFontSize(12),l.text("MANUEL S. ENVERGA UNIVERSITY FOUNDATION",14,10),l.text("Strategic Plans Summary Report",14,16),l.setFontSize(10),l.text("SY 2024-2025",14,22);let v=28;e(w).forEach((P,f)=>{l.setFont("times","bold"),l.text(`Strategic Goal ${f+1}: ${P.name}`,14,v),l.setFont("times","normal"),v+=6,P.strategic_objectives.forEach(($,N)=>{l.text(`Objective ${f+1}.${N+1}: ${$.name}`,16,v),v+=6;const I=$.action_plans.map((b,i)=>{var _,d,r,o;return[`${f+1}.${N+1}.${i+1}`,b.actions_taken,b.kpi,b.target_output,b.budget,b.key_person_responsible,((_=b.plan_monitoring)==null?void 0:_.evaluation)||"N/A",((d=b.plan_monitoring)==null?void 0:d.statement)||"N/A",(r=b.plan_monitoring)!=null&&r.is_accomplished?"Achieved":"Pending",((o=b.plan_monitoring)==null?void 0:o.time_completed)||"N/A"]});I.length>0&&(St(l,{startY:v,head:[["#","Action Plan","KPI","Target Output","Budget","Key Person Responsible","Actions Taken to Achieve Action Plan","Remarks","Accomplished","Time Completed"]],body:I,theme:"grid",styles:{font:"times",fontSize:10},headStyles:{fillColor:[41,128,185]},margin:{left:14}}),v=l.autoTable.previous.finalY+10),v>l.internal.pageSize.height-30&&(l.addPage(),v=28)}),v+=10}),l.save("Strategic_Plans_Report.pdf")};A();var h=ce(),j=a(h),z=a(j),C=s(a(z),2);C.__click=H;var F=a(C);It(F,{class:"w-4 h-4"}),kt(),t(C),t(z);var R=s(z,2),M=a(R),U=a(M);Ut(U,{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",size:20});var Q=s(U,2);zt(Q),t(M),t(R);var W=s(R,2);dt(W,()=>e(n),l=>{var v=oe();bt(3,v,()=>yt),x(l,v)},l=>{var v=ve();nt(v,21,()=>e(k),lt,(P,f)=>{var $=me(),N=a($),I=a(N);t(N);var b=s(N,2),i=a(b,!0);t(b);var _=s(b,2);nt(_,21,()=>e(f).strategic_objectives,lt,(d,r)=>{var o=de(),c=a(o),u=a(c);t(c);var T=s(c,2),y=a(T),V=s(a(y),2),K=a(V,!0);t(V),t(y);var B=s(y,2),G=s(a(B),2),mt=a(G,!0);t(G),t(B),t(T);var st=s(T,2);nt(st,21,()=>e(r).action_plans,lt,(ft,D)=>{var X=le(),rt=a(X),Z=a(rt);t(rt);var tt=s(rt,2),vt=a(tt),et=s(a(vt),2),ct=a(et,!0);t(et),t(vt);var pt=s(vt,2),at=s(a(pt),2),_t=a(at,!0);t(at),t(pt);var q=s(pt,2),ut=s(a(q),2),xt=a(ut);t(ut),t(q);var it=s(q,2),gt=s(a(it),2),$t=a(gt,!0);t(gt),t(it),t(tt);var Jt=s(tt,2);dt(Jt,()=>e(D).plan_monitoring,Wt=>{var Rt=ne(),Vt=s(a(Rt),2),Pt=a(Vt),Kt=s(a(Pt),2),Xt=a(Kt,!0);t(Kt),t(Pt);var Nt=s(Pt,2),Gt=s(a(Nt),2),Zt=a(Gt,!0);t(Gt),t(Nt);var Dt=s(Nt,2),Qt=s(a(Dt),2),Et=a(Qt),te=a(Et,!0);t(Et),t(Qt),t(Dt);var Bt=s(Dt,2),qt=s(a(Bt),2),ee=a(qt,!0);Y(()=>p(ee,e(D).plan_monitoring.time_completed?new Date(e(D).plan_monitoring.time_completed).toLocaleString():"Not Yet")),t(qt),t(Bt),t(Vt),t(Rt),Y(()=>{p(Xt,e(D).plan_monitoring.evaluation),p(Zt,e(D).plan_monitoring.statement),Mt(Et,e(D).plan_monitoring.is_accomplished?"text-green-600":"text-red-600"),p(te,e(D).plan_monitoring.is_accomplished?"Accomplished":"Pending")}),x(Wt,Rt)}),t(X),Y(()=>{p(Z,`Action Plan: ${e(D).actions_taken??""}`),p(ct,e(D).kpi),p(_t,e(D).target_output),p(xt,`$${e(D).budget??""}`),p($t,e(D).key_person_responsible)}),x(ft,X)}),t(st),t(o),Y(()=>{p(u,`Strategic Objective: ${e(r).name??""}`),p(K,e(r).kpi),p(mt,e(r).target)}),x(d,o)}),t(_),t($),Y(()=>{p(I,`Strategic Goal ${e(f).goal_no??""} - ${e(f).name??""}`),p(i,e(f).description)}),bt(3,$,()=>yt),x(P,$)}),t(v),x(l,v)}),t(j),t(h),Y(()=>C.disabled=e(n)),Yt(Q,()=>e(g),l=>E(g,l)),x(J,h),Ct()}At(["click"]);const _e=(J,L,w)=>{const n=new jt("landscape");if(n.setFont("times","normal"),n.setFontSize(12),e(L)==="all")[...new Set(e(w).map(m=>m.department))].forEach((m,k)=>{n.addPage(),n.text(`${k===0?"":"MANUEL S. ENVERGA UNIVERSITY FOUNDATION"}`,14,10),n.text(`${m} Risk Report`,14,16),n.text("Risk Summary Report",14,22),n.setFontSize(10);let A=28;e(w).filter(h=>h.department===m).forEach((h,j)=>{n.setFont("times","bold"),n.text(`Risk ${j+1}: ${h.risk_statement}`,14,A),n.setFont("times","normal"),A+=6;const z=[[h.rrn,h.risk_statement,h.likelihood_rating,h.severity,h.control_rating,h.monitoring_rating,h.status]];St(n,{startY:A,head:[["RRN","Risk Statement","Likelihood","Severity","Control","Monitoring","Status"]],body:z,theme:"grid",styles:{font:"times",fontSize:10},headStyles:{fillColor:[41,128,185]},margin:{left:14}}),A=n.autoTable.previous.finalY+10,A>n.internal.pageSize.height-30&&(n.addPage(),A=28)})});else{n.text("MANUEL S. ENVERGA UNIVERSITY FOUNDATION",14,10),n.text(`Department: ${e(L)}`,14,16),n.text("Risk Monitoring Summary Report",14,22),n.setFontSize(10);let g=28;e(w).forEach((m,k)=>{n.setFont("times","bold"),n.text(`Risk ${k+1}: ${m.risk_statement}`,14,g),n.setFont("times","normal"),g+=6;const A=[[m.rrn,m.risk_statement,m.likelihood_rating,m.severity,m.control_rating,m.monitoring_rating,m.status]];St(n,{startY:g,head:[["RRN","Risk Statement","Likelihood","Severity","Control","Monitoring","Status"]],body:A,theme:"grid",styles:{font:"times",fontSize:10},headStyles:{fillColor:[41,128,185]},margin:{left:14}}),g=n.autoTable.previous.finalY+10,g>n.internal.pageSize.height-30&&(n.addPage(),g=28)})}n.save("RiskMonitoringSummary.pdf")};var ue=S("<option> </option>"),ge=S('<div class="flex justify-center items-center p-12"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div>'),fe=S('<div class="bg-card rounded-lg p-4 border border-border  shadow-sm"><h2 class="text-xl font-semibold  mb-4 text-primary"> </h2> <div class="grid gap-4 md:grid-cols-2 mb-4"><div class="p-3  rounded"><span class="text-sm font-medium ">RRN:</span> <p class="mt-1"> </p></div> <div class="p-3 rounded"><span class="text-sm font-medium">Likelihood:</span> <p class="mt-1"> </p></div> <div class="p-3 rounded"><span class="text-sm font-medium">Severity:</span> <p class="mt-1"> </p></div> <div class="p-3 rounded"><span class="text-sm font-medium">Control:</span> <p class="mt-1"> </p></div></div> <div class="mt-4 pt-4 mx-4 border-t border-gray-200"><h5 class="text-sm font-medium  mb-3">Monitoring Details</h5> <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3"><div><span class="text-sm">Monitoring Rating</span> <p class="mt-1"> </p></div> <div><span class="text-sm">Status</span> <p class="mt-1"> </p></div></div></div></div>'),xe=S('<div class="space-y-8"></div>'),he=S('<div class="text-center py-12 bg-card rounded-lg shadow"><p class="text-muted-foreground">No risks found.</p></div>'),be=S('<div class="w-full min-h-screen"><div class="max-w-7xl mx-auto p-6"><div class="flex justify-between items-center mb-8"><h1 class="text-2xl font-bold">Risks Summary Report</h1> <button class="flex items-center gap-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90 justify-center flex-1 md:flex-initial"><!> Export PDF</button></div> <div class="flex flex-col md:flex-row gap-4 mb-6 items-center justify-between"><div class="relative flex-1 md:max-w-[300px]"><!> <input type="text" placeholder="Search risks..." class="pl-10 pr-4 py-2 bg-secondary rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-ring"></div> <div class="flex flex-col md:flex-row gap-4 w-full md:w-auto"><select class="bg-secondary rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-ring w-full md:w-[200px]"><option>All Departments</option><!></select> <select class="bg-secondary rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-ring w-full md:w-[200px]"><option>All Status</option><option>Achieved</option><option>Still Mitigating</option></select></div></div> <!></div></div>');function ye(J,L){Tt(L,!0);let w=O(ot([])),n=O(!0),g=O(""),m=O("all"),k=O("all"),A=O("rrn"),H=O("asc");const h=async()=>{try{E(n,!0);const{data:d,error:r}=await ht.from("risk_monitoring").select(`
				id,
				risks (
					rrn,
					risk_statement,
					departments (name)
				),
				likelihood_rating:likelihood_rating_id(name),
				severity:severity_id(name),
				control_rating:control_rating_id(name),
				monitoring_rating:monitoring_rating_id(status),
				is_achieved
			`);if(r)throw r;E(w,ot(d.map(o=>{var c,u,T,y,V,K,B,G;return{department:((u=(c=o.risks)==null?void 0:c.departments)==null?void 0:u.name)||"N/A",rrn:((T=o.risks)==null?void 0:T.rrn)||"N/A",risk_statement:((y=o.risks)==null?void 0:y.risk_statement)||"N/A",likelihood_rating:((V=o.likelihood_rating)==null?void 0:V.name)||"N/A",severity:((K=o.severity)==null?void 0:K.name)||"N/A",control_rating:((B=o.control_rating)==null?void 0:B.name)||"N/A",monitoring_rating:((G=o.monitoring_rating)==null?void 0:G.status)||"N/A",status:o.is_achieved?"Achieved":"Still Mitigating"}})))}catch(d){console.error("Error fetching risk monitoring data:",d)}finally{E(n,!1)}},j=Ot(()=>e(w).filter(d=>{const r=`${d.rrn} ${d.risk_statement} ${d.department}`.toLowerCase().includes(e(g).toLowerCase()),o=e(m)==="all"||d.status===e(m),c=e(k)==="all"||d.department===e(k);return r&&o&&c}).sort((d,r)=>{const o=String(d[e(A)]),c=String(r[e(A)]);return e(H)==="asc"?o.localeCompare(c):c.localeCompare(o)}));h();var z=be(),C=a(z),F=a(C),R=s(a(F),2);R.__click=[_e,k,j];var M=a(R);It(M,{class:"w-4 h-4"}),kt(),t(R),t(F);var U=s(F,2),Q=a(U),W=a(Q);Ut(W,{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",size:20});var l=s(W,2);zt(l),t(Q);var v=s(Q,2),P=a(v),f=a(P);f.value=(f.__value="all")==null?"":"all";var $=s(f);nt($,17,()=>[...new Set(e(w).map(d=>d.department))],lt,(d,r)=>{var o=ue(),c={},u=a(o,!0);t(o),Y(()=>{c!==(c=e(r))&&(o.value=(o.__value=e(r))==null?"":e(r)),p(u,e(r))}),x(d,o)}),t(P);var N=s(P,2),I=a(N);I.value=(I.__value="all")==null?"":"all";var b=s(I);b.value=(b.__value="Achieved")==null?"":"Achieved";var i=s(b);i.value=(i.__value="Still Mitigating")==null?"":"Still Mitigating",t(N),t(v),t(U);var _=s(U,2);dt(_,()=>e(n),d=>{var r=ge();bt(3,r,()=>yt),x(d,r)},d=>{var r=Ft(),o=Lt(r);dt(o,()=>e(j).length>0,c=>{var u=xe();nt(u,21,()=>e(j),lt,(T,y)=>{var V=fe(),K=a(V),B=a(K);t(K);var G=s(K,2),mt=a(G),st=s(a(mt),2),ft=a(st,!0);t(st),t(mt);var D=s(mt,2),X=s(a(D),2),rt=a(X,!0);t(X),t(D);var Z=s(D,2),tt=s(a(Z),2),vt=a(tt,!0);t(tt),t(Z);var et=s(Z,2),ct=s(a(et),2),pt=a(ct,!0);t(ct),t(et),t(G);var at=s(G,2),_t=s(a(at),2),q=a(_t),ut=s(a(q),2),xt=a(ut,!0);t(ut),t(q);var it=s(q,2),gt=s(a(it),2),$t=a(gt,!0);t(gt),t(it),t(_t),t(at),t(V),Y(()=>{p(B,`Risk: ${e(y).risk_statement??""}`),p(ft,e(y).rrn),p(rt,e(y).likelihood_rating),p(vt,e(y).severity),p(pt,e(y).control_rating),p(xt,e(y).monitoring_rating),p($t,e(y).status)}),bt(3,V,()=>yt),x(T,V)}),t(u),x(c,u)},c=>{var u=he();x(c,u)},!0),x(d,r)}),t(C),t(z),Y(()=>R.disabled=e(n)),Yt(l,()=>e(g),d=>E(g,d)),wt(P,()=>e(k),d=>E(k,d)),wt(N,()=>e(m),d=>E(m,d)),x(J,z),Ct()}At(["click"]);var Se=S("<option> </option>"),we=S('<div class="flex justify-center items-center p-12"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div>'),ke=S('<div class="bg-card rounded-lg p-4 border border-border  shadow-sm"><h2 class="text-xl font-semibold mb-4 text-primary"> </h2> <div class="grid gap-4 md:grid-cols-2 mb-4"><div class="p-3  rounded"><span class="text-sm font-medium ">KPI:</span> <p class="mt-1"> </p></div> <div class="p-3  rounded"><span class="text-sm font-medium ">Planned Actions:</span> <p class="mt-1"> </p></div></div> <div class="mt-4 pt-4 mx-4 border-t border-gray-200"><h5 class="text-md font-medium  mb-3">Monitoring Details</h5> <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-4"><div><span class="text-sm font-medium">Actions Taken to Achieve Opportunity</span> <p class="mt-1 text-sm"> </p></div> <div><span class="text-sm font-medium">Remarks</span> <p class="mt-1 text-sm"> </p></div> <div><span class="text-sm font-medium">Accomplished</span> <p class="mt-1 text-sm"><span> </span></p></div> <div><span class="text-sm font-medium">Time Completed</span> <p class="mt-1 text-sm"> </p></div></div></div></div>'),Ae=S('<div class="space-y-8"></div>'),$e=S('<div class="text-center py-12 bg-card rounded-lg shadow"><p class="text-muted-foreground">No opportunities found.</p></div>'),Re=S('<div class="w-full min-h-screen "><div class="max-w-7xl mx-auto p-6"><div class="flex justify-between items-center mb-8"><h1 class="text-2xl font-bold  flex items-center gap-2">Opportunities Summary Report</h1> <div class="flex flex-col md:flex-row gap-4 items-start md:items-center justify-between mt-4"><div class="relative flex-1 w-full max-w-sm"><!> <input type="text" placeholder="Search opportunities..." class="pl-10 pr-4 py-2 bg-secondary rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-ring"></div> <div class="flex flex-col md:flex-row gap-4 items-center"><select class="px-3 py-2  bg-secondary   rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"></select> <select class="px-3 py-2   bg-secondary rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"><option>All Status</option><option>Accomplished</option><option>Still Pending</option></select> <button class="flex items-center gap-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90 justify-center flex-1 md:flex-initial"><!> Export PDF</button></div></div></div> <!></div></div>');function Pe(J,L){Tt(L,!0);let w=O(ot([])),n=O(ot([])),g=O("All Departments"),m=O("all"),k=O(""),A=O(!0);const H=async()=>{try{E(A,!0);const{data:i,error:_}=await ht.from("opt_monitoring").select(`
                    opt_id,
                    time_completed,
                    evaluation,
                    statement,
                    is_accomplished,
                    opportunities (
                        opt_statement,
                        kpi,
                        planned_actions,
                        departments (name)
                    )
                `);if(_){console.error("Error fetching monitoring data:",_.message);return}E(w,ot(i.map(r=>{var o,c,u,T,y;return{opt_id:r.opt_id,opt_statement:((o=r.opportunities)==null?void 0:o.opt_statement)||"Pending Statement",kpi:((c=r.opportunities)==null?void 0:c.kpi)||"No KPI",planned_actions:((u=r.opportunities)==null?void 0:u.planned_actions)||"Peinding  Actions Taken",time_completed:r.time_completed,evaluation:r.evaluation||"Pending Actions Taken",statement:r.statement||"No Remarks",is_accomplished:r.is_accomplished||!1,department_name:((y=(T=r.opportunities)==null?void 0:T.departments)==null?void 0:y.name)||"No Department"}})));const d=new Set(e(w).map(r=>r.department_name));E(n,ot(Array.from(d).sort())),e(n).unshift("All Departments")}catch(i){console.error("Error fetching opportunities data:",i)}finally{E(A,!1)}},h=Ot(()=>e(w).filter(i=>(e(g)==="All Departments"||i.department_name===e(g))&&(e(m)==="all"||e(m)==="true"&&i.is_accomplished||e(m)==="false"&&!i.is_accomplished)&&(i.opt_statement.toLowerCase().includes(e(k).toLowerCase())||i.kpi.toLowerCase().includes(e(k).toLowerCase())||i.planned_actions.toLowerCase().includes(e(k).toLowerCase())))),j=()=>{const i=new jt("landscape");i.setFont("times","normal"),i.setFontSize(12),i.text("MANUEL S. ENVERGA UNIVERSITY FOUNDATION",14,10),i.text("Opportunities Summary Report",14,16),i.setFontSize(10),i.text("SY 2024-2025",14,22);let _=28;const d=e(g)==="All Departments"?e(w).reduce((r,o)=>(r[o.department_name]||(r[o.department_name]=[]),r[o.department_name].push(o),r),{}):{[e(g)]:e(h)};for(const[r,o]of Object.entries(d))i.setFont("times","bold"),i.text(`Department: ${r}`,14,_),_+=10,o.forEach((c,u)=>{i.setFont("times","bold"),i.text(`Opportunity ${u+1}: ${c.opt_statement}`,14,_),i.setFont("times","normal"),_+=6;const T=[[c.kpi,c.planned_actions,c.evaluation,c.statement,c.is_accomplished?"Yes":"No",c.time_completed||"Pending"]];St(i,{startY:_,head:[["KPI","Planned Actions","Actions Taken to Achieve Opportunity","Remarks","Accomplished","Time Completed"]],body:T,theme:"grid",styles:{font:"times",fontSize:10},headStyles:{fillColor:[41,128,185]},margin:{left:14}}),_=i.autoTable.previous.finalY+10,_>i.internal.pageSize.height-30&&(i.addPage(),_=28)});i.save("Opportunities_Report.pdf")};H();var z=Re(),C=a(z),F=a(C),R=s(a(F),2),M=a(R),U=a(M);Ut(U,{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",size:20});var Q=s(U,2);zt(Q),t(M);var W=s(M,2),l=a(W);nt(l,21,()=>e(n),lt,(i,_)=>{var d=Se(),r={},o=a(d,!0);t(d),Y(()=>{r!==(r=e(_))&&(d.value=(d.__value=e(_))==null?"":e(_)),p(o,e(_))}),x(i,d)}),t(l);var v=s(l,2),P=a(v);P.value=(P.__value="all")==null?"":"all";var f=s(P);f.value=(f.__value="true")==null?"":"true";var $=s(f);$.value=($.__value="false")==null?"":"false",t(v);var N=s(v,2);N.__click=j;var I=a(N);It(I,{class:"w-4 h-4"}),kt(),t(N),t(W),t(R),t(F);var b=s(F,2);dt(b,()=>e(A),i=>{var _=we();x(i,_)},i=>{var _=Ft(),d=Lt(_);dt(d,()=>e(h).length>0,r=>{var o=Ae();nt(o,21,()=>e(h),lt,(c,u)=>{var T=ke(),y=a(T),V=a(y);t(y);var K=s(y,2),B=a(K),G=s(a(B),2),mt=a(G,!0);t(G),t(B);var st=s(B,2),ft=s(a(st),2),D=a(ft,!0);t(ft),t(st),t(K);var X=s(K,2),rt=s(a(X),2),Z=a(rt),tt=s(a(Z),2),vt=a(tt,!0);t(tt),t(Z);var et=s(Z,2),ct=s(a(et),2),pt=a(ct,!0);t(ct),t(et);var at=s(et,2),_t=s(a(at),2),q=a(_t),ut=a(q,!0);t(q),t(_t),t(at);var xt=s(at,2),it=s(a(xt),2),gt=a(it,!0);Y(()=>p(gt,e(u).time_completed?new Date(e(u).time_completed).toLocaleString():"Pending")),t(it),t(xt),t(rt),t(X),t(T),Y(()=>{p(V,`Opportunity: ${e(u).opt_statement??""}`),p(mt,e(u).kpi),p(D,e(u).planned_actions),p(vt,e(u).evaluation),p(pt,e(u).statement),Mt(q,e(u).is_accomplished?"text-green-600":"text-red-600"),p(ut,e(u).is_accomplished?"Yes":"No")}),x(c,T)}),t(o),x(r,o)},r=>{var o=$e();x(r,o)},!0),x(i,_)}),t(C),t(z),Y(()=>N.disabled=e(A)),Yt(Q,()=>e(k),i=>E(k,i)),wt(l,()=>e(g),i=>E(g,i)),wt(v,()=>e(m),i=>E(m,i)),x(J,z),Ct()}At(["click"]);var Ne=(J,L,w)=>E(L,e(w).id),De=S("<button><!> <span> </span></button>"),Ee=S('<div class="min-h-screen"><div class="container mx-auto px-4 py-8"><div class="flex justify-between items-center mb-6"><div class="flex items-center gap-2"><!> <h1 class="text-2xl font-bold">Summary Report</h1></div></div> <div class="rounded-lg shadow-sm mb-6"><div class="flex flex-wrap gap-2 p-2"></div></div> <div class="rounded-lg shadow-sm p-6"><!></div></div></div>');function Je(J){let L=ae("Plans");const w=[{id:"Plans",label:"Plans",icon:Ht},{id:"Risks",label:"Risks",icon:re},{id:"Opportunities",label:"Opportunities",icon:ie}];var n=Ee(),g=a(n),m=a(g),k=a(m),A=a(k);Ht(A,{class:"w-6 h-6 text-primary"}),kt(2),t(k),t(m);var H=s(m,2),h=a(H);nt(h,5,()=>w,lt,(C,F)=>{var R=De();R.__click=[Ne,L,F];var M=a(R);se(M,()=>e(F).icon,(W,l)=>{l(W,{size:18})});var U=s(M,2),Q=a(U,!0);t(U),t(R),Y(()=>{Mt(R,`flex items-center gap-2 px-4 py-2 rounded-md transition-all duration-200 ${(e(L)===e(F).id?"bg-primary hover:bg-primary/90 text-white":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300")??""}`),p(Q,e(F).label)}),x(C,R)}),t(h),t(H);var j=s(H,2),z=a(j);dt(z,()=>e(L)==="Plans",C=>{pe(C,{})},C=>{var F=Ft(),R=Lt(F);dt(R,()=>e(L)==="Risks",M=>{ye(M,{})},M=>{Pe(M,{})},!0),x(C,F)}),t(j),t(g),t(n),x(J,n)}At(["click"]);export{Je as component};
